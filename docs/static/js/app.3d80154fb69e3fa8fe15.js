webpackJsonp([1],{"83+K":function(t,n){},PePf:function(t,n){},x35b:function(t,n,e){"use strict";function i(t,n,e){return void 0===e&&(e=1),t.map(function(t){return t.data}).reduce(function(t,n){return n.forEach(function(n){return t[n.team]=[n.value/e].concat(t[n.team])}),t},n.map(function(){return[]}))}function r(t){return m.a.get(t)}function s(t){return t.data}function a(){return r(y).then(function(t){return s(t)}).then(function(t){return t.leagues})}function u(){return r(g).then(function(t){return s(t)}).then(function(t){return t.teams})}function o(){return r(v).then(function(t){return s(t)}).then(function(t){return t.seasons})}function c(){return r(x).then(function(t){return s(t)}).then(function(t){return t.seasons})}function l(t){return Math.log(t)/Math.LN10+1|0}function f(t){e("83+K")}function h(t){e("PePf")}Object.defineProperty(n,"__esModule",{value:!0});var p=e("/5sW"),d=(e("SCKt"),e("mtWM")),m=e.n(d),y="./static/npb-leagues.json",g="./static/npb-teams.json",v="./static/npb-number-of-visitors-history.json",x="./static/npb-pennant-race-history.json",L=e("8r4o"),_=e.n(L),b=e("rcfA"),A=e.n(b),k=e("d7WX"),H=e.n(k),P=e("A5qe"),C=0,O=p.a.extend({name:"ChartLine",props:{cid:{type:String,default:"chart-line-"+C++},svgWidth:{type:Number,default:1140},svgHeight:{type:Number,default:640},paddingBottom:{type:Number,default:24},paddingLeft:{type:Number,default:80},paddingRight:{type:Number,default:40},series:{type:Array,required:!0},lines:{type:Array,default:function(){return[]}},xAxisLabels:{type:Array,default:function(){return[]}},yAxisUnit:{type:String,default:""}},data:function(){return{displayMaskWidth:0,displayFillOpacity:0,inAnimate:!1}},computed:{viewBox:function(){return"0 0 "+this.svgWidth+" "+this.svgHeight},chartHeight:function(){return this.svgHeight-this.paddingBottom},allValues:function(){return this.series.reduce(function(t,n){return t.concat(n)},[])},_maxValue:function(){return Math.max.apply(Math,this.allValues)},maxValue:function(){return H()(this._maxValue,-1*(l(this._maxValue)-2))},percentOfSeries:function(){var t=this;return this.series.map(function(n){return n.map(function(n){return n/t.maxValue})})},yAxisLinePropsList:function(){var t="M0,0.5 H"+this.svgWidth;return _()(0,this.chartHeight,this.chartHeight/4).concat([this.chartHeight]).map(function(n){var e=A()(n,2);return{y:e,d:t,transform:"translate(0, "+e+")"}})},yAxisLabelPropsList:function(){var t=this;return[0,.5,1].map(function(n){return{value:t.maxValue*n,transform:"translate(0, "+A()(t.chartHeight*n*-1,2)+")"}})},yAxisLabelTransform:function(){return"translate(0 "+this.chartHeight+")"},chartWidth:function(){return this.svgWidth-(this.paddingLeft+this.paddingRight)},xAxisStep:function(){return this.chartWidth/Math.max.apply(Math,this.series.map(function(t){return t.length-1}))},seriesLineTransform:function(){return"translate("+this.paddingLeft+" "+this.chartHeight+")"},seriesLinePointList:function(){var t=this;return this.percentOfSeries.map(function(n){return n.map(function(n,e){return[A()(t.xAxisStep*e,2),A()(t.chartHeight*n*-1,2)]})})},seriesLinePropsList:function(){var t=this;return this.seriesLinePointList.map(function(n,e){return{color:t.lines[e].color,points:n.map(function(t){return t.join(" ")}).join(" ")}})},seriesDotPropsList:function(){return this.seriesLinePointList.map(function(t){return t.map(function(t){return{transform:"translate("+t[0]+" "+t[1]+")"}})})},xAxisLabelPropsList:function(){var t=this;return this.xAxisLabels.map(function(n,e){return{value:n,transform:"translate("+A()(t.xAxisStep*e,2)+")"}})},maskId:function(){return"mask-"+this.cid},maskRef:function(){return"url(#"+this.maskId+")"},maskTransform:function(){return"translate(0 "+-1*this.chartHeight+")"}},methods:{handleClickRunButton:function(){this.animate()},animate:function(){var t=this;if(!this.inAnimate){Object.assign(this,{displayMaskWidth:0,displayFillOpacity:0,inAnimate:!0});var n={width:0},e={fillOpacity:0},i=P.timeline().add({targets:n,width:this.chartWidth,easing:"linear",duration:300,autoplay:!1,run:function(){t.displayMaskWidth=n.width},complete:function(){t.displayMaskWidth=t.chartWidth}}).add({targets:e,fillOpacity:1,easing:"easeOutExpo",duration:300,autoplay:!1,run:function(){t.displayFillOpacity=e.fillOpacity},complete:function(){t.displayFillOpacity=1}});i.complete=function(){t.inAnimate=!1},i.play()}}}}),W=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"chart-line"},[e("p",[e("button",{attrs:{type:"button",disabled:t.inAnimate},on:{click:function(n){n.preventDefault(),t.handleClickRunButton(n)}}},[t._v("Run")])]),t._v(" "),e("svg",{attrs:{viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight}},[e("defs",[e("mask",{attrs:{id:t.maskId}},[e("rect",{attrs:{x:"0",y:"0",width:t.displayMaskWidth,height:t.chartHeight,transform:t.maskTransform,fill:"#fff"}})])]),t._v(" "),e("g",{staticClass:"chart-line__y-step-line"},t._l(t.yAxisLinePropsList,function(t){return e("path",{key:t.y,attrs:{d:t.d,transform:t.transform}})})),t._v(" "),e("g",{staticClass:"chart-line__y-label"},[e("g",{attrs:{transform:t.yAxisLabelTransform}},t._l(t.yAxisLabelPropsList,function(n,i){return e("text",{key:i,attrs:{x:"0",y:"0",transform:n.transform}},[t._v(t._s(n.value))])}))]),t._v(" "),e("g",{attrs:{transform:t.seriesLineTransform}},[e("g",{staticClass:"chart-line__series-line",attrs:{mask:t.maskRef}},t._l(t.seriesLinePropsList,function(t,n){return e("polyline",{key:n,attrs:{points:t.points,stroke:t.color}})})),t._v(" "),e("g",{staticClass:"chart-line__series-dot",attrs:{"fill-opacity":t.displayFillOpacity}},t._l(t.seriesDotPropsList,function(n,i){return e("g",{key:i,attrs:{fill:t.seriesLinePropsList[i].color}},t._l(n,function(t,n){return e("circle",{key:n,attrs:{cx:"0",cy:"0",transform:t.transform}})}))}))]),t._v(" "),e("g",{staticClass:"chart-line__x-label"},[e("g",{attrs:{transform:t.seriesLineTransform}},t._l(t.xAxisLabelPropsList,function(n){return e("text",{key:n.value,attrs:{x:"0",y:"0",transform:n.transform}},[t._v(t._s(n.value))])}))])])])},V=[],M={render:W,staticRenderFns:V},j=M,w=e("VU/8"),R=f,B=w(O,j,!1,R,"data-v-36eaf5a8",null),S=B.exports,T=p.a.extend({name:"App",components:{ChartLine:S},data:function(){return{leagues:[],teams:[],numberOfVisitorsHistory:[],pennantRaceHistory:[]}},methods:{fetchAll:function(){return Promise.all([a(),u(),o(),c()])}},computed:{lineChartHistoryList:function(){return i(this.numberOfVisitorsHistory,this.teams,1e3)},lineChartPropsList:function(){return this.teams.map(function(t){return{id:t.id,name:t.name,color:t.color}})},lineChartXAxisLabelList:function(){return this.numberOfVisitorsHistory.map(function(t){return t.season}).reverse()}},created:function(){var t=this;this.fetchAll().then(function(n){var e=n[0],i=n[1],r=n[2],s=n[3];Object.assign(t,{leagues:e,teams:i,numberOfVisitorsHistory:r,pennantRaceHistory:s})}).catch(function(t){return console.error(t.message)})}}),F=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),e("div",{staticClass:"container"},[e("h2",[t._v("Line chart")]),t._v(" "),e("p",[t._v("History of NPB's annual visitors.")]),t._v(" "),e("ChartLine",{attrs:{series:t.lineChartHistoryList,lines:t.lineChartPropsList,xAxisLabels:t.lineChartXAxisLabelList,yAxisUnit:"x 1000"}})],1)])},N=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("header",{staticClass:"container"},[e("h1",[t._v("Vue Animated Graph Demo")]),t._v(" "),e("p",[t._v("Demos of animated graph that render by Vue.js without D3.js.")])])}],D={render:F,staticRenderFns:N},E=D,U=e("VU/8"),I=h,K=U(T,E,!1,I,null,null),X=K.exports;p.a.config.productionTip=!1,new p.a({el:"#app",render:function(t){return t(X)}})}},["x35b"]);
//# sourceMappingURL=app.3d80154fb69e3fa8fe15.js.map