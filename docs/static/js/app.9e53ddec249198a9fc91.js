webpackJsonp([1],{"83+K":function(t,e){},TcKV:function(t,e){},UrMU:function(t,e){},h2vj:function(t,e){},x35b:function(t,e,n){"use strict";function i(t,e,n){return void 0===n&&(n=1),t.map(function(t){return t.data}).reduce(function(t,e){return e.forEach(function(e){return t[e.team]=[e.value/n].concat(t[e.team])}),t},e.map(function(){return[]}))}function r(t){return y.a.get(t)}function a(t){return t.data}function s(){return r(g).then(function(t){return a(t)}).then(function(t){return t.leagues})}function o(){return r(L).then(function(t){return a(t)}).then(function(t){return t.teams})}function u(){return r(_).then(function(t){return a(t)}).then(function(t){return t.seasons})}function c(){return r(x).then(function(t){return a(t)}).then(function(t){return t.seasons})}function l(t){return Math.log(t)/Math.LN10+1|0}function h(t){n("83+K")}function f(t){n("h2vj")}function p(t){n("UrMU")}function d(t){n("TcKV")}Object.defineProperty(e,"__esModule",{value:!0});var m=n("/5sW"),v=(n("SCKt"),n("mtWM")),y=n.n(v),g="./static/npb-leagues.json",L="./static/npb-teams.json",_="./static/npb-number-of-visitors-history.json",x="./static/npb-pennant-race-history.json",b=n("8r4o"),C=n.n(b),P=n("rcfA"),S=n.n(P),A=n("d7WX"),O=n.n(A),k=n("A5qe"),H=0,V=m.a.extend({name:"ChartLine",props:{cid:{type:String,default:"chart-line-"+H++},svgWidth:{type:Number,default:1140},svgHeight:{type:Number,default:640},paddingBottom:{type:Number,default:24},paddingLeft:{type:Number,default:80},paddingRight:{type:Number,default:40},series:{type:Array,required:!0},lines:{type:Array,default:function(){return[]}},xAxisLabels:{type:Array,default:function(){return[]}},yAxisUnit:{type:String,default:""}},data:function(){return{displayMaskWidth:0,displayFillOpacity:0,inAnimate:!1}},computed:{viewBox:function(){return"0 0 "+this.svgWidth+" "+this.svgHeight},chartHeight:function(){return this.svgHeight-this.paddingBottom},allValues:function(){return this.series.reduce(function(t,e){return t.concat(e)},[])},_maxValue:function(){return Math.max.apply(Math,this.allValues)},maxValue:function(){return O()(this._maxValue,-1*(l(this._maxValue)-2))},percentOfSeries:function(){var t=this;return this.series.map(function(e){return e.map(function(e){return e/t.maxValue})})},yAxisLinePropsList:function(){var t="M0,0.5 H"+this.svgWidth;return C()(0,this.chartHeight,this.chartHeight/4).concat([this.chartHeight]).map(function(e){var n=S()(e,2);return{y:n,d:t,transform:"translate(0, "+n+")"}})},yAxisLabelPropsList:function(){var t=this;return[0,.5,1].map(function(e){return{value:t.maxValue*e,transform:"translate(0, "+S()(t.chartHeight*e*-1,2)+")"}})},yAxisLabelTransform:function(){return"translate(0 "+this.chartHeight+")"},chartWidth:function(){return this.svgWidth-(this.paddingLeft+this.paddingRight)},xAxisStep:function(){return this.chartWidth/Math.max.apply(Math,this.series.map(function(t){return t.length-1}))},seriesLineTransform:function(){return"translate("+this.paddingLeft+" "+this.chartHeight+")"},seriesLinePointList:function(){var t=this;return this.percentOfSeries.map(function(e){return e.map(function(e,n){return[S()(t.xAxisStep*n,2),S()(t.chartHeight*e*-1,2)]})})},seriesLinePropsList:function(){var t=this;return this.seriesLinePointList.map(function(e,n){return{color:t.lines[n].color,points:e.map(function(t){return t.join(" ")}).join(" ")}})},seriesDotPropsList:function(){return this.seriesLinePointList.map(function(t){return t.map(function(t){return{transform:"translate("+t[0]+" "+t[1]+")"}})})},xAxisLabelPropsList:function(){var t=this;return this.xAxisLabels.map(function(e,n){return{value:e,transform:"translate("+S()(t.xAxisStep*n,2)+")"}})},maskId:function(){return"mask-"+this.cid},maskRef:function(){return"url(#"+this.maskId+")"},maskTransform:function(){return"translate(0 "+-1*this.chartHeight+")"}},methods:{handleClickRunButton:function(){this.animate()},animate:function(){var t=this;if(!this.inAnimate){Object.assign(this,{displayMaskWidth:0,displayFillOpacity:0,inAnimate:!0});var e={width:0},n={fillOpacity:0},i=k.timeline().add({targets:e,width:this.chartWidth,easing:"linear",duration:500,autoplay:!1,run:function(){t.displayMaskWidth=e.width},complete:function(){t.displayMaskWidth=t.chartWidth}}).add({targets:n,fillOpacity:1,easing:"easeOutQuad",duration:500,autoplay:!1,run:function(){t.displayFillOpacity=n.fillOpacity},complete:function(){t.displayFillOpacity=1}});i.complete=function(){t.inAnimate=!1},i.play()}}},created:function(){console.log("created","ChartLine")},mounted:function(){console.log("mounted","ChartLine")},destroyed:function(){console.log("destroyed","ChartLine")}}),B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart-line"},[n("p",[n("button",{attrs:{type:"button",disabled:t.inAnimate},on:{click:function(e){e.preventDefault(),t.handleClickRunButton(e)}}},[t._v("Run")])]),t._v(" "),n("svg",{attrs:{viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight}},[n("defs",[n("mask",{attrs:{id:t.maskId}},[n("rect",{attrs:{x:"0",y:"0",width:t.displayMaskWidth,height:t.chartHeight,transform:t.maskTransform,fill:"#fff"}})])]),t._v(" "),n("g",{staticClass:"chart-line__y-step-line"},t._l(t.yAxisLinePropsList,function(t){return n("path",{key:t.y,attrs:{d:t.d,transform:t.transform}})})),t._v(" "),n("g",{staticClass:"chart-line__y-label"},[n("g",{attrs:{transform:t.yAxisLabelTransform}},t._l(t.yAxisLabelPropsList,function(e,i){return n("text",{key:i,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))]),t._v(" "),n("g",{attrs:{transform:t.seriesLineTransform}},[n("g",{staticClass:"chart-line__series-line",attrs:{mask:t.maskRef}},t._l(t.seriesLinePropsList,function(t,e){return n("polyline",{key:e,attrs:{points:t.points,stroke:t.color}})})),t._v(" "),n("g",{staticClass:"chart-line__series-dot",attrs:{"fill-opacity":t.displayFillOpacity}},t._l(t.seriesDotPropsList,function(e,i){return n("g",{key:i,attrs:{fill:t.seriesLinePropsList[i].color}},t._l(e,function(t,e){return n("circle",{key:e,attrs:{cx:"0",cy:"0",transform:t.transform}})}))}))]),t._v(" "),n("g",{staticClass:"chart-line__x-label"},[n("g",{attrs:{transform:t.seriesLineTransform}},t._l(t.xAxisLabelPropsList,function(e){return n("text",{key:e.value,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))])])])},M=[],R={render:B,staticRenderFns:M},W=R,w=n("VU/8"),D=h,N=w(V,W,!1,D,"data-v-36eaf5a8",null),T=N.exports,j=(n("F2xG"),m.a.extend({name:"ChartBar",props:{svgWidth:{type:Number,default:1140},svgHeight:{type:Number,default:640},paddingBottom:{type:Number,default:24},paddingLeft:{type:Number,default:120},paddingRight:{type:Number,default:90},series:{type:Array,required:!0},forcedMinValue:{type:Number},lines:{type:Array,default:function(){return[]}},yAxisUnit:{type:String,default:""}},data:function(){return{displaySeriesLinePropsList:[],inAnimate:!1}},computed:{viewBox:function(){return"0 0 "+this.svgWidth+" "+this.svgHeight},chartHeight:function(){return this.svgHeight-this.paddingBottom},_maxValue:function(){return Math.max.apply(Math,this.series)},maxValue:function(){return O()(this._maxValue,-1*(l(this._maxValue)-2))},percentOfSeries:function(){var t=this;return this.series.map(function(e){return e/t.maxValue})},yAxisLinePropsList:function(){var t="M0,0.5 H"+this.svgWidth;return C()(0,this.chartHeight,this.chartHeight/4).concat([this.chartHeight]).map(function(e){var n=S()(e,2);return{y:n,d:t,transform:"translate(0, "+n+")"}})},yAxisLabelPropsList:function(){var t=this;return[0,.5,1].map(function(e){return{value:t.maxValue*e,transform:"translate(0, "+S()(t.chartHeight*e*-1,2)+")"}})},yAxisLabelTransform:function(){return"translate(0 "+this.chartHeight+")"},chartWidth:function(){return this.svgWidth-(this.paddingLeft+this.paddingRight)},xAxisStep:function(){return this.chartWidth/(this.series.length-1)},seriesLineTransform:function(){return"translate("+this.paddingLeft+" "+this.chartHeight+")"},seriesLinePointList:function(){var t=this;return this.percentOfSeries.map(function(e,n){return[S()(t.xAxisStep*n,2),S()(t.chartHeight*e*-1,2)]})},seriesLinePropsList:function(){return this.seriesLinePointList.map(this.createSeriesLineProps.bind(this))},xAxisLabelPropsList:function(){var t=this;return this.lines.map(function(e,n){return{value:e.name,transform:"translate("+S()(t.xAxisStep*n,2)+")"}})}},watch:{inAnimate:function(t){this.$emit("in-animate",t)},seriesLinePropsList:function(){this.animate()}},methods:{handleClickRunButton:function(){var t=this;this.initializeDisplaySeriesLinePropsList(),this.$nextTick(function(){t.animate()})},createSeriesLineProps:function(t,e){var n=this.lines[e].color,i=t[0];return{color:n,d:"M 0 0 V "+t[1],transform:"translate("+i+")"}},initializeDisplaySeriesLinePropsList:function(){var t=this;(e=this.displaySeriesLinePropsList).splice.apply(e,[0,this.displaySeriesLinePropsList.length].concat(this.seriesLinePointList.map(function(e,n){var i=e[0];return t.createSeriesLineProps([i,0],n)})));var e},animate:function(){var t=this;if(!this.inAnimate){this.inAnimate=!0;var e=k.timeline();this.displaySeriesLinePropsList.forEach(function(n,i){var r=n.d,a={d:r};e.add({targets:a,d:t.seriesLinePropsList[i].d,easing:"easeOutQuad",duration:500,autoplay:!1,offset:0,run:function(){Object.assign(t.displaySeriesLinePropsList[i],{d:a.d})},complete:function(){Object.assign(t.displaySeriesLinePropsList[i],{d:t.seriesLinePropsList[i].d})}})}),e.complete=function(){t.inAnimate=!1},e.play()}}},created:function(){console.log("created","ChartBar"),this.initializeDisplaySeriesLinePropsList()},mounted:function(){console.log("mounted","ChartBar")},destroyed:function(){console.log("destroyed","ChartBar")}})),U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart-bar"},[n("p",[n("button",{attrs:{type:"button",disabled:t.inAnimate},on:{click:function(e){e.preventDefault(),t.handleClickRunButton(e)}}},[t._v("Run")])]),t._v(" "),n("svg",{attrs:{viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight}},[n("g",{staticClass:"chart-bar__y-step-line"},t._l(t.yAxisLinePropsList,function(t){return n("path",{key:t.y,attrs:{d:t.d,transform:t.transform}})})),t._v(" "),n("g",{staticClass:"chart-bar__y-label"},[n("g",{attrs:{transform:t.yAxisLabelTransform}},t._l(t.yAxisLabelPropsList,function(e,i){return n("text",{key:i,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))]),t._v(" "),n("g",{attrs:{transform:t.seriesLineTransform}},[n("g",{staticClass:"chart-bar__series-bar"},t._l(t.displaySeriesLinePropsList,function(t,e){return n("path",{key:e,attrs:{d:t.d,stroke:t.color,transform:t.transform}})}))]),t._v(" "),n("g",{staticClass:"chart-bar__x-label"},[n("g",{attrs:{transform:t.seriesLineTransform}},t._l(t.xAxisLabelPropsList,function(e){return n("text",{key:e.value,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))])])])},F=[],$={render:U,staticRenderFns:F},E=$,I=n("VU/8"),z=f,K=I(j,E,!1,z,"data-v-9996baea",null),q=K.exports,G=2*Math.PI,Q=m.a.extend({name:"ChartPie",props:{svgWidth:{type:Number,default:640},svgHeight:{type:Number,default:640},chartR:{type:Number,default:160},series:{type:Array,required:!0},pies:{type:Array,default:function(){return[]}}},data:function(){return{displayPercentOfSeries:[],inAnimate:!1}},computed:{viewBox:function(){return this.svgWidth/-2+" "+this.svgHeight/-2+" "+this.svgWidth+" "+this.svgHeight},totalValue:function(){return this.series.reduce(function(t,e){return t+e},0)},percentOfSeries:function(){var t=this,e=0;return this.series.map(function(n,i){if(i===t.series.length-1)return 1-e;var r=n/t.totalValue;return e+=r,r})},seriesPiePropsList:function(){var t=this,e=this.chartR*Math.cos(0),n=this.chartR*Math.sin(0),i=0;return this.displayPercentOfSeries.map(function(t,e){return{value:t,team:e}}).sort(function(t,e){return t.value<e.value?1:t.value>e.value?-1:t.team<e.team?-1:t.team>e.team?1:0}).map(function(r){var a=r.value,s=r.team,o=t.pies[s].color,u=t.chartR*Math.cos(G*a),c=t.chartR*Math.sin(G*a),l=[S()(Math.cos(G*i),4),S()(Math.sin(G*i),4)];return l.push(-1*l[1],l[0],0,1),i+=a,{value:a,color:o,d:"M "+e+" "+n+" a "+t.chartR+" "+t.chartR+" 0 "+(a>.5?1:0)+" 1 "+S()(u-e,2)+" "+S()(c-n,2),transform:"matrix("+l.join(" ")+")"}})}},watch:{inAnimate:function(t){this.$emit("in-animate",t)},series:function(){this.series.length!==this.displayPercentOfSeries.length?this.initializeDisplayPercentOfSeries():this.animate()}},methods:{handleClickRunButton:function(){var t=this;this.initializeDisplayPercentOfSeries(),this.$nextTick(function(){t.animate()})},initializeDisplayPercentOfSeries:function(){var t=this,e=1/this.percentOfSeries.length;(n=this.displayPercentOfSeries).splice.apply(n,[0,this.displayPercentOfSeries.length].concat(this.percentOfSeries.map(function(n,i){return i<t.percentOfSeries.length-1?e:1-e*(t.percentOfSeries.length-1)})));var n},animate:function(){var t=this;if(!this.inAnimate){this.inAnimate=!0;var e=k.timeline();this.displayPercentOfSeries.forEach(function(n,i){var r={percent:n};e.add({targets:r,percent:t.percentOfSeries[i],easing:"easeOutQuad",duration:500,autoplay:!1,offset:0,run:function(){t.displayPercentOfSeries.splice(i,1,r.percent)},complete:function(){t.displayPercentOfSeries.splice(i,1,t.percentOfSeries[i])}})}),e.complete=function(){t.inAnimate=!1},e.play()}}},created:function(){console.log("created","ChartPie"),this.initializeDisplayPercentOfSeries()},mounted:function(){console.log("mounted","ChartPie")},destroyed:function(){console.log("destroyed","ChartPie")}}),X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart-pie"},[n("p",[n("button",{attrs:{type:"button",disabled:t.inAnimate},on:{click:function(e){e.preventDefault(),t.handleClickRunButton(e)}}},[t._v("Run")])]),t._v(" "),n("svg",{attrs:{viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight}},[n("g",{staticClass:"chart-pie__series-pie"},t._l(t.seriesPiePropsList,function(t,e){return n("path",{key:e,attrs:{d:t.d,stroke:t.color,transform:t.transform}})}))])])},J=[],Y={render:X,staticRenderFns:J},Z=Y,tt=n("VU/8"),et=p,nt=tt(Q,Z,!1,et,"data-v-02aa5839",null),it=nt.exports,rt=m.a.extend({name:"App",components:{ChartLine:T,ChartBar:q,ChartPie:it},data:function(){return{leagues:[],teams:[],numberOfVisitorsHistory:[],pennantRaceHistory:[],barChartCurrentSeason:0,isBarChartSeasonSelectorDisabled:!1,pieChartCurrentSeason:0,isPieChartSeasonSelectorDisabled:!1}},computed:{seasonOptionList:function(){return this.numberOfVisitorsHistory.map(function(t){return t.season})},lineChartHistoryList:function(){return i(this.numberOfVisitorsHistory,this.teams,1e3)},lineChartPropsList:function(){return this.teams.map(function(t){return{id:t.id,name:t.name,color:t.color}})},lineChartXAxisLabelList:function(){return this.numberOfVisitorsHistory.map(function(t){return t.season}).reverse()},barChartCurrentSeasonList:function(){var t=this,e=this.numberOfVisitorsHistory.find(function(e){return e.season===t.barChartCurrentSeason});return e?e.data.map(function(t){return t.value/1e3}):[]},barChartPropsList:function(){return this.teams.map(function(t){return{id:t.id,name:t.name,color:t.color}})},pieChartCurrentSeasonList:function(){var t=this,e=this.numberOfVisitorsHistory.find(function(e){return e.season===t.pieChartCurrentSeason});return e?e.data.map(function(t){return t.value/1e3}):[]},pipeChartPropsList:function(){return this.teams.map(function(t){return{id:t.id,name:t.name,color:t.color}})}},methods:{handleInAnimateChartBar:function(t){this.isBarChartSeasonSelectorDisabled=t},handleInAnimateChartPie:function(t){this.isPieChartSeasonSelectorDisabled=t},fetchAll:function(){return Promise.all([s(),o(),u(),c()])}},created:function(){var t=this;this.fetchAll().then(function(e){var n=e[0],i=e[1],r=e[2],a=e[3],s=Math.max.apply(Math,r.map(function(t){return t.season}));Object.assign(t,{leagues:n,teams:i,numberOfVisitorsHistory:r,pennantRaceHistory:a,barChartCurrentSeason:s,pieChartCurrentSeason:s})}).catch(function(t){return console.error(t.message)})}}),at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),n("div",{staticClass:"container"},[n("h2",[t._v("Line chart")]),t._v(" "),n("p",[t._v("History of NPB's annual visitors.")]),t._v(" "),n("ChartLine",{attrs:{series:t.lineChartHistoryList,lines:t.lineChartPropsList,xAxisLabels:t.lineChartXAxisLabelList,yAxisUnit:"x 1000"}})],1),t._v(" "),n("div",{staticClass:"container"},[n("h2",[t._v("Bar chart")]),t._v(" "),n("p",[t._v("Annual visitors per team")]),t._v(" "),n("p",[n("span",[t._v("Season: ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.barChartCurrentSeason,expression:"barChartCurrentSeason"}],attrs:{disabled:t.isBarChartSeasonSelectorDisabled},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.barChartCurrentSeason=e.target.multiple?n:n[0]}}},t._l(t.seasonOptionList,function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))]),t._v(" "),n("ChartBar",{attrs:{series:t.barChartCurrentSeasonList,lines:t.barChartPropsList,yAxisUnit:"x 1000"},on:{"in-animate":t.handleInAnimateChartBar}})],1),t._v(" "),n("div",{staticClass:"container"},[n("h2",[t._v("Pie chart")]),t._v(" "),n("p",[t._v("Annual visitors per team")]),t._v(" "),n("p",[n("span",[t._v("Season: ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.pieChartCurrentSeason,expression:"pieChartCurrentSeason"}],attrs:{disabled:t.isPieChartSeasonSelectorDisabled},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.pieChartCurrentSeason=e.target.multiple?n:n[0]}}},t._l(t.seasonOptionList,function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))]),t._v(" "),n("ChartPie",{attrs:{series:t.pieChartCurrentSeasonList,pies:t.pipeChartPropsList},on:{"in-animate":t.handleInAnimateChartPie}})],1),t._v(" "),t._m(1)])},st=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"container"},[n("h1",[t._v("Vue Animated Graph Demo")]),t._v(" "),n("p",[t._v("Demos of animated graph that render by Vue.js without D3.js.")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"container"},[n("p",[n("a",{attrs:{href:"https://github.com/haribote/vue-animated-graph-demo",target:"_blank"}},[t._v("Fork on GitHub")])])])}],ot={render:at,staticRenderFns:st},ut=ot,ct=n("VU/8"),lt=d,ht=ct(rt,ut,!1,lt,null,null),ft=ht.exports;m.a.config.productionTip=!1,new m.a({el:"#app",render:function(t){return t(ft)}})}},["x35b"]);
//# sourceMappingURL=app.9e53ddec249198a9fc91.js.map